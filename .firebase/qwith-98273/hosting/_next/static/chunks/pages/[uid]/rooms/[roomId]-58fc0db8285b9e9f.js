(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{4995:function(e,t,n){"use strict";n.d(t,{g:function(){return c}});var r=n(7294),i=n(3234),s=n(7277),o=n(4520),a=(...e)=>e.filter(Boolean).join(" "),u=["h","minH","height","minHeight"],c=(0,s.Gp)((e,t)=>{let n=(0,s.mq)("Textarea",e),{className:c,rows:l,...d}=(0,o.Lr)(e),x=(0,i.Yp)(d),h=l?function(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}(n,u):n;return r.createElement(s.m$.textarea,{ref:t,rows:l,...x,className:a("chakra-textarea",c),__css:h})});c.displayName="Textarea"},1894:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[uid]/rooms/[roomId]",function(){return n(8898)}])},9006:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5893),i=n(639),s=n(5610);function o(){return(0,r.jsx)(i.M5,{children:(0,r.jsx)(s.$,{})})}},4901:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var r=n(5893),i=n(3382),s=n(8981),o=n(639),a=n(8998),u=n(7741),c=n(5321);function l(e){let{quiz:t,index:n,quizzesRef:l,editable:d}=e,{question:x,answer:h,options:f}=t;return(0,r.jsx)(s.Zb,{w:{base:"sm",md:"lg"},children:(0,r.jsx)(s.eW,{children:(0,r.jsxs)(o.Ug,{children:[(0,r.jsxs)(a.kN,{children:[(0,r.jsxs)(a.dw,{children:["# ",n+1]}),(0,r.jsx)(a.Jf,{children:x}),(0,r.jsx)(a.vh,{children:(0,r.jsx)(o.QI,{children:null==f?void 0:f.map((e,t)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.HC,{children:e===h?(0,r.jsxs)(r.Fragment,{children:[e,(0,r.jsx)(o.Ct,{colorScheme:"green",mx:2,children:"Correct"})]}):(0,r.jsx)(r.Fragment,{children:e})},t)}))})})]}),!0===d&&(0,r.jsx)(u.hU,{"aria-label":"Delete quiz",icon:(0,r.jsx)(i.Tw,{}),onClick:()=>j(t.id)})]})})});async function j(e){l&&await (0,c.oe)((0,c.JU)(l,e))}}},3277:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var r=n(5893),i=n(3038);function s(e){let{children:t}=e;return(0,r.jsxs)(i.bZ,{status:"error",minH:"8rem",children:[(0,r.jsx)(i.zM,{}),(0,r.jsx)(i.Cd,{children:"\uD83E\uDD2F"}),(0,r.jsx)(i.X,{children:t||"Something went wrong."})]})}},8898:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(5893),i=n(639),s=n(5610),o=n(5321),a=n(1163),u=n(3349),c=n(6677),l=n(9006),d=n(3277),x=n(7741),h=n(5191),f=n(3484),j=n(911),p=n(808),m=n(3382),w=n(4995),v=n(979),g=n(7294);function b(e){let{roomId:t}=e,[n,s]=(0,g.useState)(!1),[a,u]=(0,g.useState)("What is the capital of Japan?"),[c,l]=(0,g.useState)(0),[d,h]=(0,g.useState)(["Fukuoka","Tokyo","Osaka","Nagoya"]);return(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)(w.g,{value:a,onChange:e=>u(e.target.value),placeholder:"Question",rows:8,resize:"none"}),(0,r.jsx)(i.xu,{h:"8px"}),(0,r.jsx)(i.gC,{spacing:2,w:"100%",children:d.map((e,t)=>(0,r.jsxs)(v.BZ,{children:[(0,r.jsx)(v.II,{value:e,onChange(e){let n=[...d];n[t]=e.target.value,h(n)},placeholder:"Option ".concat(t+1),pr:"2rem"}),(0,r.jsx)(v.xH,{children:(0,r.jsx)(x.hU,{"aria-label":"Mark as answer",h:"1.75rem",size:"sm",icon:(0,r.jsx)(m.nQ,{}),onClick(){l(t)},colorScheme:c===t?"green":"gray"})})]},t))}),(0,r.jsx)(x.zx,{onClick:j,isLoading:n,isDisabled:""===a||""===d[0]||""===d[1],width:"full",children:"Add Quiz"})]});async function j(){s(!0);let e=(0,o.hJ)(f.db,"rooms"),n=(0,o.JU)(e,t),r=(0,o.hJ)(n,"quizzes"),i={question:a,options:d,answer:d[c]};try{await (0,o.ET)(r,i),u(""),h(["","","",""])}catch(l){console.log(l)}finally{s(!1)}}}var z=n(4901);function y(e){let{roomId:t}=e,n=(0,o.hJ)(f.db,"rooms"),a=(0,o.JU)(n,t),u=(0,o.hJ)(a,"quizzes").withConverter(j.D),[l,d,x]=(0,c.d4)(u);return x?(0,r.jsxs)(i.xu,{children:[(0,r.jsx)(i.X6,{children:"Something went wrong..."}),(0,r.jsx)(i.xv,{children:null==x?void 0:x.message})]}):d?(0,r.jsx)(i.M5,{children:(0,r.jsx)(s.$,{})}):(0,r.jsx)(i.gC,{children:null==l?void 0:l.map((e,t)=>(0,r.jsx)(z.Y,{quizzesRef:u,quiz:e,index:t,editable:!0},e.id))})}function C(e){let{roomId:t,room:n}=e,s=(0,o.JU)(f.db,"rooms",t).withConverter(p.e),a=(0,o.hJ)(s,"quizzes").withConverter(j.D),[u,c,l]=(0,h.C)(f.w,"startQuiz"),[d,m,w]=(0,h.C)(f.w,"endQuiz"),[v,g,z]=(0,h.C)(f.w,"nextQuiz"),[C,D,Q]=(0,h.C)(f.w,"previousQuiz");return"waiting"===n.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.X6,{children:n.title}),(0,r.jsx)(i.xv,{children:n.description}),(0,r.jsx)(x.zx,{colorScheme:"green",async onClick(){await u({roomId:t})},isLoading:c,isDisabled:void 0!==l,children:"Start Game"}),(0,r.jsx)(i.xu,{h:"24px"}),(0,r.jsx)(i.iz,{}),(0,r.jsx)(i.xu,{h:"24px"}),(0,r.jsx)(b,{roomId:t}),(0,r.jsx)(i.xu,{h:"24px"}),(0,r.jsx)(y,{roomId:t})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.X6,{children:n.title}),(0,r.jsx)(i.xv,{children:n.description}),(0,r.jsx)(k,{quizzesRef:a,currentQuizId:n.currentQuizId}),(0,r.jsxs)(i.Ug,{children:[(0,r.jsx)(x.zx,{variant:"outline",async onClick(){await C({roomId:t})},isLoading:D,isDisabled:void 0!==Q,children:"Previous Quiz"}),(0,r.jsx)(x.zx,{colorScheme:"green",async onClick(){await v({roomId:t})},isLoading:g,isDisabled:void 0!==z,children:"Next Quiz"})]})]})}function k(e){let{quizzesRef:t,currentQuizId:n}=e,[s,a,u]=(0,c.Xi)((0,o.JU)(t,n).withConverter(j.D));return void 0!==u?(0,r.jsx)(d.D,{}):a||void 0===s?(0,r.jsx)(l.Z,{}):(0,r.jsxs)(i.xu,{children:[(0,r.jsx)(i.X6,{size:"md",children:s.question}),(0,r.jsx)(i.xv,{children:s.answer})]})}function D(){let e=(0,a.useRouter)(),{roomId:t}=e.query;return e.isReady?(console.log(t),(0,r.jsx)(Q,{roomId:t})):(0,r.jsx)(i.M5,{children:(0,r.jsx)(s.$,{})})}function Q(e){let{roomId:t}=e,[n]=(0,u.F_)(f.I),i=(0,o.hJ)(f.db,"rooms"),s=(0,o.JU)(i,t).withConverter(p.e),[a,x,h]=(0,c.Xi)(s);return x?(0,r.jsx)(l.Z,{}):h||!a||a.createdBy!==(null==n?void 0:n.uid)?(0,r.jsx)(d.D,{}):(0,r.jsx)(C,{roomId:t,room:a})}},911:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});let r={toFirestore:e=>({question:e.question,options:e.options,answer:e.answer}),fromFirestore(e,t){let n=e.data(t);return{id:e.id,question:n.question,options:n.options,answer:n.answer}}}},808:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});let r={toFirestore:e=>({pin:e.pin,status:e.status,title:e.title,description:e.description,createdAt:e.createdAt,updatedAt:e.updatedAt,expiresAt:e.expiresAt,createdBy:e.createdBy,currentQuizId:e.currentQuizId}),fromFirestore(e,t){let n=e.data(t);return{pin:n.pin,status:n.status,title:n.title,description:n.description,createdAt:n.createdAt.toDate(),updatedAt:n.updatedAt.toDate(),expiresAt:n.expiresAt.toDate(),createdBy:n.createdBy,currentQuizId:n.currentQuizId}}}},5191:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(7853),i=n(7294),s=function(e,t){var n=(0,i.useState)(),s=n[0],o=n[1],a=(0,i.useState)(!1),u=a[0],c=a[1];return[(0,i.useCallback)(function(n){var i,s,a,u;return i=void 0,s=void 0,a=void 0,u=function(){var i;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,function(s){switch(s.label){case 0:i=(0,r.V1)(e,t),c(!0),o(void 0),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,i(n)];case 2:return[2,s.sent()];case 3:return o(s.sent()),[3,5];case 4:return c(!1),[7];case 5:return[2]}})},new(a||(a=Promise))(function(e,t){function n(e){try{o(u.next(e))}catch(n){t(n)}}function r(e){try{o(u.throw(e))}catch(n){t(n)}}function o(t){var i;t.done?e(t.value):((i=t.value)instanceof a?i:new a(function(e){e(i)})).then(n,r)}o((u=u.apply(i,s||[])).next())})},[e,t]),u,s]}}},function(e){e.O(0,[224,774,888,179],function(){return e(e.s=1894)}),_N_E=e.O()}]);