(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9430:function(e,t,n){"use strict";n.d(t,{n:function(){return b}});var r=n(8387),i=n(6734),s=n(7294);function u(e){return e.sort((e,t)=>{let n=e.compareDocumentPosition(t);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return -1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(!(n&Node.DOCUMENT_POSITION_DISCONNECTED)&&!(n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC))return 0;throw Error("Cannot sort the given nodes.")})}var a=e=>"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function l(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function o(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var d="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,c=e=>e,f=class{descendants=new Map;register=e=>{if(null!=e)return a(e)?this.registerNode(e):t=>{this.registerNode(t,e)}};unregister=e=>{this.descendants.delete(e);let t=u(Array.from(this.descendants.keys()));this.assignIndex(t)};destroy=()=>{this.descendants.clear()};assignIndex=e=>{this.descendants.forEach(t=>{let n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})};count=()=>this.descendants.size;enabledCount=()=>this.enabledValues().length;values=()=>{let e=Array.from(this.descendants.values());return e.sort((e,t)=>e.index-t.index)};enabledValues=()=>this.values().filter(e=>!e.disabled);item=e=>{if(0!==this.count())return this.values()[e]};enabledItem=e=>{if(0!==this.enabledCount())return this.enabledValues()[e]};first=()=>this.item(0);firstEnabled=()=>this.enabledItem(0);last=()=>this.item(this.descendants.size-1);lastEnabled=()=>{let e=this.enabledValues().length-1;return this.enabledItem(e)};indexOf=e=>{var t;return e?(null==(t=this.descendants.get(e))?void 0:t.index)??-1:-1};enabledIndexOf=e=>null==e?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e));next=(e,t=!0)=>{let n=l(e,this.count(),t);return this.item(n)};nextEnabled=(e,t=!0)=>{let n=this.item(e);if(!n)return;let r=this.enabledIndexOf(n.node),i=l(r,this.enabledCount(),t);return this.enabledItem(i)};prev=(e,t=!0)=>{let n=o(e,this.count()-1,t);return this.item(n)};prevEnabled=(e,t=!0)=>{let n=this.item(e);if(!n)return;let r=this.enabledIndexOf(n.node),i=o(r,this.enabledCount()-1,t);return this.enabledItem(i)};registerNode=(e,t)=>{if(!e||this.descendants.has(e))return;let n=Array.from(this.descendants.keys()).concat(e),r=u(n);(null==t?void 0:t.disabled)&&(t.disabled=!!t.disabled);let i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(r)}},[h,p]=(0,r.k)({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function b(){let e=c(h),t=()=>c(p()),n=e=>(function(e){let t=p(),[n,r]=(0,s.useState)(-1),u=(0,s.useRef)(null);d(()=>()=>{u.current&&t.unregister(u.current)},[]),d(()=>{if(!u.current)return;let e=Number(u.current.dataset.index);n==e||Number.isNaN(e)||r(e)});let a=e?c(t.register(e)):c(t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(u.current),register:(0,i.lq)(a,u)}})(e),r=()=>(function(){let e=(0,s.useRef)(new f);return d(()=>()=>e.current.destroy()),e.current})();return[e,t,r,n]}},8053:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var r=n(7294),i=n(9251);function s(e){let{value:t,defaultValue:n,onChange:s,shouldUpdate:u=(e,t)=>e!==t}=e,a=(0,i.W)(s),l=(0,i.W)(u),[o,d]=(0,r.useState)(n),c=void 0!==t,f=c?t:o,h=(0,i.W)(e=>{let t="function"==typeof e?e(f):e;l(f,t)&&(c||d(t),a(t))},[c,a,f,l]);return[f,h]}},8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(487)}])},487:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(5893),i=n(8494),s=n(639),u=n(7294),a=n(7277),l=n(4520),o=n(4031),d=n(9430),c=n(8053),f=n(8387),h=n(6734),p=(...e)=>e.filter(Boolean).join(" "),b=e=>!!e||void 0;function v(...e){return function(t){e.some(e=>(null==e||e(t),null==t?void 0:t.defaultPrevented))}}var[m,N,g,I]=(0,d.n)(),[x,y]=(0,f.k)({name:"PinInputContext",errorMessage:"usePinInputContext: `context` is undefined. Seems you forgot to all pin input fields within `<PinInput />`"}),C=e=>null==e?void 0:e.split("");function E(e,t){return("alphanumeric"===t?/^[a-zA-Z0-9]+$/i:/^[0-9]+$/).test(e)}function O(e){let t=(0,a.mq)("PinInput",e),{children:n,...r}=(0,l.Lr)(e),{descendants:i,...s}=function(e={}){let{autoFocus:t,value:n,defaultValue:r,onChange:i,onComplete:s,placeholder:a="â—‹",manageFocus:l=!0,otp:o=!1,id:d,isDisabled:f,isInvalid:h,type:p="number",mask:m}=e,N=(0,u.useId)(),I=d??`pin-input-${N}`,x=g(),[y,O]=(0,u.useState)(!0),[w,_]=(0,u.useState)(-1),[P,T]=(0,c.T)({defaultValue:C(r)||[],value:C(n),onChange:e=>null==i?void 0:i(e.join(""))});(0,u.useEffect)(()=>{if(t){let e=x.first();e&&requestAnimationFrame(()=>{e.node.focus()})}},[x]);let k=(0,u.useCallback)(e=>{if(!y||!l)return;let t=x.next(e,!1);t&&requestAnimationFrame(()=>{t.node.focus()})},[x,y,l]),S=(0,u.useCallback)((e,t,n=!0)=>{let r=[...P];r[t]=e,T(r);let i=""!==e&&r.length===x.count()&&r.every(e=>null!=e&&""!==e);i?null==s||s(r.join("")):n&&k(t)},[P,T,k,s,x]),D=(0,u.useCallback)(()=>{var e;let t=Array(x.count()).fill("");T(t);let n=x.first();null==(e=null==n?void 0:n.node)||e.focus()},[x,T]),j=(0,u.useCallback)((e,t)=>{let n=t;return(null==e?void 0:e.length)>0&&(e[0]===t.charAt(0)?n=t.charAt(1):e[0]===t.charAt(1)&&(n=t.charAt(0))),n},[]),A=(0,u.useCallback)(e=>{let{index:t,...n}=e,r=e=>{let n=e.target.value,r=P[t],i=j(r,n);if(""===i){S("",t);return}if(n.length>2){if(E(n,p)){let u=n.split("").filter((e,t)=>t<x.count());T(u),u.length===x.count()&&(null==s||s(u.join("")))}}else E(i,p)&&S(i,t),O(!0)},i=e=>{var n;if("Backspace"===e.key&&l){if(""===e.target.value){let r=x.prev(t,!1);r&&(S("",t-1,!1),null==(n=r.node)||n.focus(),O(!0))}else O(!1)}},u=()=>{_(t)},d=()=>{_(-1)};return{"aria-label":"Please enter your pin code",inputMode:"number"===p?"numeric":"text",type:m?"password":"number"===p?"tel":"text",...n,id:`${I}-${t}`,disabled:f,"aria-invalid":b(h),onChange:v(n.onChange,r),onKeyDown:v(n.onKeyDown,i),onFocus:v(n.onFocus,u),onBlur:v(n.onBlur,d),value:P[t]||"",autoComplete:o?"one-time-code":"off",placeholder:w===t?"":a}},[x,w,j,I,f,m,h,l,s,o,a,S,T,p,P]);return{getInputProps:A,id:I,descendants:x,values:P,setValue:S,setValues:T,clear:D}}(r),d=(0,o.W)(n).map(e=>(0,u.cloneElement)(e,{__css:t}));return u.createElement(m,{value:i},u.createElement(x,{value:s},d))}O.displayName="PinInput";var w=(0,a.Gp)(function(e,t){let n=function(e={},t=null){let{getInputProps:n}=y(),{index:r,register:i}=I();return n({...e,ref:(0,h.lq)(i,t),index:r})}(e,t);return u.createElement(a.m$.input,{...n,className:p("chakra-pin-input",e.className)})});w.displayName="PinInputField";var _=n(5610),P=n(5675),T=n.n(P),k=n(1163),S=n(5191),D=n(3484);function j(){let[e,t]=(0,u.useState)(""),n=(0,k.useRouter)(),[a,l,o]=(0,S.C)(D.w,"getRoomIdWithPin"),d=(0,i.pm)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(s.gC,{spacing:4,pt:"30vh",children:[(0,r.jsx)(T(),{src:"/vercel.svg",width:200,height:200,alt:"logo"}),(0,r.jsx)(s.Ug,{pt:8,children:(0,r.jsxs)(O,{onChange:f,value:e,isDisabled:l,autoFocus:!0,children:[(0,r.jsx)(w,{}),(0,r.jsx)(w,{}),(0,r.jsx)(w,{}),(0,r.jsx)(w,{})]})}),(0,r.jsx)(_.$,{hidden:!l})]})});async function c(e){var t;let r=null===(t=await a({pin:e}))||void 0===t?void 0:t.data;if(o){d({title:"Error",description:o.message,status:"error",duration:5e3,isClosable:!0});return}if(null==r){d({title:"Room not found",description:"Please check the PIN and try again.",status:"error",duration:5e3,isClosable:!0});return}n.push("/rooms/".concat(r))}async function f(e){t(e),4===e.length&&(await c(e),t(""))}}},5191:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(7853),i=n(7294),s=function(e,t){var n=(0,i.useState)(),s=n[0],u=n[1],a=(0,i.useState)(!1),l=a[0],o=a[1];return[(0,i.useCallback)(function(n){var i,s,a,l;return i=void 0,s=void 0,a=void 0,l=function(){var i;return function(e,t){var n,r,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(i=(i=u.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){u=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){u.label=s[1];break}if(6===s[0]&&u.label<i[1]){u.label=i[1],i=s;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(s);break}i[2]&&u.ops.pop(),u.trys.pop();continue}s=t.call(e,u)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,function(s){switch(s.label){case 0:i=(0,r.V1)(e,t),o(!0),u(void 0),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,i(n)];case 2:return[2,s.sent()];case 3:return u(s.sent()),[3,5];case 4:return o(!1),[7];case 5:return[2]}})},new(a||(a=Promise))(function(e,t){function n(e){try{u(l.next(e))}catch(n){t(n)}}function r(e){try{u(l.throw(e))}catch(n){t(n)}}function u(t){var i;t.done?e(t.value):((i=t.value)instanceof a?i:new a(function(e){e(i)})).then(n,r)}u((l=l.apply(i,s||[])).next())})},[e,t]),l,s]}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);