(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{5353:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rooms/[roomId]",function(){return n(6459)}])},9006:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(5893),i=n(639),s=n(5610);function d(){return(0,r.jsx)(i.M5,{children:(0,r.jsx)(s.$,{})})}},4901:function(e,t,n){"use strict";n.d(t,{Y:function(){return u}});var r=n(5893),i=n(3382),s=n(8981),d=n(639),o=n(8998),c=n(7741),l=n(5321);function u(e){let{quiz:t,index:n,quizzesRef:u,editable:a}=e,{question:h,answer:x,options:j}=t;return(0,r.jsx)(s.Zb,{w:{base:"sm",md:"lg"},children:(0,r.jsx)(s.eW,{children:(0,r.jsxs)(d.Ug,{children:[(0,r.jsxs)(o.kN,{children:[(0,r.jsxs)(o.dw,{children:["# ",n+1]}),(0,r.jsx)(o.Jf,{children:h}),(0,r.jsx)(o.vh,{children:(0,r.jsx)(d.QI,{children:null==j?void 0:j.map((e,t)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d.HC,{children:e===x?(0,r.jsxs)(r.Fragment,{children:[e,(0,r.jsx)(d.Ct,{colorScheme:"green",mx:2,children:"Correct"})]}):(0,r.jsx)(r.Fragment,{children:e})},t)}))})})]}),!0===a&&(0,r.jsx)(c.hU,{"aria-label":"Delete quiz",icon:(0,r.jsx)(i.Tw,{}),onClick:()=>m(t.id)})]})})});async function m(e){u&&await (0,l.oe)((0,l.JU)(u,e))}}},3277:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var r=n(5893),i=n(3038);function s(e){let{children:t}=e;return(0,r.jsxs)(i.bZ,{status:"error",minH:"8rem",children:[(0,r.jsx)(i.zM,{}),(0,r.jsx)(i.Cd,{children:"\uD83E\uDD2F"}),(0,r.jsx)(i.X,{children:t||"Something went wrong."})]})}},6459:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(5893),i=n(5321),s=n(1163),d=n.n(s),o=n(6677),c=n(9006),l=n(3277),u=n(8494),a=n(639),h=n(3234),x=n(979),j=n(7741),m=n(7294),f=n(3484);function v(e){let{roomId:t}=e,[n,s]=(0,m.useState)(""),[o,c]=(0,m.useState)(!1),l=(0,u.pm)();return(0,r.jsx)(a.gC,{spacing:4,pt:"30vh",children:(0,r.jsxs)("form",{onSubmit:v,children:[(0,r.jsx)(h.NI,{isRequired:!0,children:(0,r.jsx)(x.II,{type:"text",placeholder:"Team name ❤️",onChange:e=>s(e.currentTarget.value)})}),(0,r.jsx)(j.zx,{type:"submit",mt:4,width:"full",isLoading:o,children:"Create team"})]})});async function v(e){e.preventDefault(),c(!0);try{let r=(0,i.hJ)(f.db,"rooms"),o=(0,i.JU)(r,t),u=(0,i.hJ)(o,"teams"),a=await (0,i.ET)(u,{name:n,score:0}),h=a.id;d().push("/rooms/".concat(t,"?teamId=").concat(h))}catch(x){l({title:"Error.",description:"An error occurred: ".concat(x.message),status:"error",duration:9e3,isClosable:!0}),s("")}finally{c(!1)}}}var p=n(5610),g=n(911),w=n(808),C=n(8981),z=n(8561);function I(e){let{roomId:t,teamId:n,quiz:s}=e,[d,o]=(0,m.useState)("");return(0,r.jsxs)(C.Zb,{w:{base:"sm",md:"lg"},children:[(0,r.jsx)(C.Ol,{children:s.question}),(0,r.jsx)(C.eW,{children:(0,r.jsx)(z.Ee,{onChange:e=>c(e),value:d,children:(0,r.jsx)(a.gC,{divider:(0,r.jsx)(a.cX,{}),spacing:"4",children:s.options.map((e,t)=>(0,r.jsx)(z.Y8,{value:e,children:e},t))})})})]});async function c(e){o(e);let r=(0,i.hJ)(f.db,"rooms"),d=(0,i.JU)(r,t),c=(0,i.hJ)(d,"quizzes"),l=(0,i.JU)(c,s.id),u=(0,i.hJ)(l,"answers"),a=(0,i.JU)(u,n);await (0,i.pl)(a,{answer:e})}}function J(e){let{roomId:t,teamId:n,quizzesRef:s,currentQuizId:d}=e,u=(0,i.JU)(s,d).withConverter(g.D),[a,h,x]=(0,o.Xi)(u);return x?(0,r.jsx)(l.D,{}):h?(0,r.jsx)(c.Z,{}):(0,r.jsx)(I,{roomId:t,teamId:n,quiz:a})}function b(e){let{roomId:t,teamId:n}=e,s=(0,i.JU)(f.db,"rooms",t).withConverter(w.e),[d,c,u]=(0,o.Xi)(s),h=(0,i.hJ)(s,"quizzes").withConverter(g.D);return!u&&d&&d.currentQuizId?c?(0,r.jsx)(a.M5,{children:(0,r.jsx)(p.$,{})}):(0,r.jsxs)(a.gC,{pt:"30vh",children:[(0,r.jsx)(a.X6,{children:null==d?void 0:d.title}),(0,r.jsx)(J,{quizzesRef:h,teamId:n,roomId:t,currentQuizId:null==d?void 0:d.currentQuizId})]}):(0,r.jsx)(l.D,{})}var q=n(4493);let D={toFirestore:e=>({name:e.name,score:e.score}),fromFirestore(e,t){let n=e.data(t);return{id:e.id,name:n.name,score:n.score}}};var X=n(4901);function y(e){let{quizzes:t}=e;return(0,r.jsx)(a.gC,{children:null==t?void 0:t.map((e,t)=>(0,r.jsx)(X.Y,{quiz:e,index:t},e.id))})}var A=n(8998);function U(e){let{team:t,index:n}=e,{name:i,score:s}=t;return(0,r.jsx)(C.Zb,{w:{base:"sm",md:"lg"},children:(0,r.jsx)(C.eW,{children:(0,r.jsxs)(A.kN,{children:[(0,r.jsx)(A.dw,{children:0===n?(0,r.jsx)(a.Ct,{colorScheme:"blue",children:"1st"}):1===n?(0,r.jsx)(a.Ct,{colorScheme:"green",children:"2nd"}):2===n?(0,r.jsx)(a.Ct,{colorScheme:"orange",children:"3rd"}):"#".concat(n+1)}),(0,r.jsxs)(A.Jf,{children:[i," "]}),(0,r.jsx)(A.vh,{children:s})]})})})}function F(e){let{teams:t}=e;return(0,r.jsx)(a.gC,{children:null==t?void 0:t.sort((e,t)=>t.score-e.score).map((e,t)=>(0,r.jsx)(U,{team:e,index:t},e.id))})}function _(e){let{roomId:t}=e,n=(0,i.hJ)(f.db,"rooms").withConverter(w.e),s=(0,i.JU)(n,t).withConverter(w.e),[d,l,u]=(0,o.Xi)(s),h=(0,i.hJ)(s,"teams").withConverter(D),[x,j,m]=(0,o.d4)(h),v=(0,i.hJ)(s,"quizzes").withConverter(g.D),[p,C,z]=(0,o.d4)(v);return l||j||C?(0,r.jsx)(c.Z,{}):u||m||z||!d||!x||!p?(0,r.jsx)("p",{children:"Something went wrong"}):(0,r.jsxs)(a.gC,{children:[(0,r.jsx)(a.X6,{children:null==d?void 0:d.title}),(0,r.jsxs)(q.mQ,{isFitted:!0,children:[(0,r.jsxs)(q.td,{children:[(0,r.jsx)(q.OK,{children:"".concat(null==x?void 0:x.length," ").concat((null==x?void 0:x.length)===1?"team":"teams")}),(0,r.jsx)(q.OK,{children:"".concat(null==p?void 0:p.length," ").concat((null==p?void 0:p.length)===1?"quiz":"quizzes")})]}),(0,r.jsxs)(q.nP,{children:[(0,r.jsx)(q.x4,{children:(0,r.jsx)(F,{teams:x})}),(0,r.jsx)(q.x4,{children:(0,r.jsx)(y,{quizzes:p})})]})]})]})}function S(e){let{roomId:t}=e,n=(0,i.hJ)(f.db,"rooms"),s=(0,i.JU)(n,t).withConverter(w.e),d=(0,i.hJ)(s,"teams").withConverter(D),[c,l,u]=(0,o.d4)(d);return u?(0,r.jsxs)(a.M5,{h:"100vh",children:[(0,r.jsx)(a.X6,{children:"Something went wrong..."}),(0,r.jsx)(a.xv,{children:null==u?void 0:u.message})]}):l?(0,r.jsx)(a.M5,{h:"100vh",children:(0,r.jsx)(a.X6,{children:"Loading..."})}):(0,r.jsxs)(a.gC,{children:[(0,r.jsxs)(a.Ug,{children:[(0,r.jsx)(a.X6,{size:"md",children:"Waiting for others to join"}),(0,r.jsx)(p.$,{size:"sm"})]}),(0,r.jsxs)(C.Zb,{minWidth:"sm",maxWidth:"100vw",children:[(0,r.jsx)(C.Ol,{children:(0,r.jsx)(a.X6,{size:"md",children:"Teams"})}),(0,r.jsx)(C.eW,{children:(0,r.jsx)(a.Kq,{divider:(0,r.jsx)(a.cX,{}),spacing:"4",children:null==c?void 0:c.map(e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.X6,{size:"xs",textTransform:"uppercase",children:e.name}),(0,r.jsx)(a.xu,{children:(0,r.jsx)(a.xv,{children:e.name})},e.id)]}))})})]})]})}function Z(){let e=(0,s.useRouter)(),{roomId:t,teamId:n}=e.query;return e.isReady?(0,r.jsx)(E,{roomId:t,teamId:n}):(0,r.jsx)(c.Z,{})}function E(e){let{roomId:t,teamId:n}=e,s=(0,i.hJ)(f.db,"rooms"),d=(0,i.JU)(s,t).withConverter(w.e),[u,a,h,x]=(0,o.Xi)(d);return h?(0,r.jsx)(l.D,{}):(null==x?void 0:x.exists())&&!a?(null==u?void 0:u.status)==="closed"?(0,r.jsx)(_,{roomId:t}):n?(null==u?void 0:u.status)==="waiting"?(0,r.jsx)(S,{roomId:t,teamId:n}):(0,r.jsx)(b,{roomId:t,teamId:n}):(0,r.jsx)(v,{roomId:t}):(0,r.jsx)(c.Z,{})}},911:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});let r={toFirestore:e=>({question:e.question,options:e.options,answer:e.answer}),fromFirestore(e,t){let n=e.data(t);return{id:e.id,question:n.question,options:n.options,answer:n.answer}}}},808:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});let r={toFirestore:e=>({pin:e.pin,status:e.status,title:e.title,description:e.description,createdAt:e.createdAt,updatedAt:e.updatedAt,expiresAt:e.expiresAt,createdBy:e.createdBy,currentQuizId:e.currentQuizId}),fromFirestore(e,t){let n=e.data(t);return{pin:n.pin,status:n.status,title:n.title,description:n.description,createdAt:n.createdAt.toDate(),updatedAt:n.updatedAt.toDate(),expiresAt:n.expiresAt.toDate(),createdBy:n.createdBy,currentQuizId:n.currentQuizId}}}}},function(e){e.O(0,[224,970,774,888,179],function(){return e(e.s=5353)}),_N_E=e.O()}]);